load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")

go_library(
    name = "rest",
    srcs = [
        "configure_api.go",
        "configure_server.go",
        "configure_weaviate.go",
        "doc.go",
        "embedded_spec.go",
        "handlers_backup.go",
        "handlers_batch_objects.go",
        "handlers_classification.go",
        "handlers_graphql.go",
        "handlers_misc.go",
        "handlers_nodes.go",
        "handlers_objects.go",
        "handlers_schema.go",
        "helpers.go",
        "middlewares.go",
        "panics_middleware.go",
        "server.go",
    ],
    importpath = "github.com/marcussorealheis/weaviate/adapters/handlers/rest",
    visibility = ["//visibility:public"],
    deps = [
        "@com_github_go_openapi_errors//:go_default_library",
        "@com_github_go_openapi_runtime//:go_default_library",
        "@com_github_go_openapi_runtime//flagext:go_default_library",
        "@com_github_go_openapi_runtime//middleware:go_default_library",
        "@com_github_go_openapi_strfmt//:go_default_library",
        "@com_github_go_openapi_swag//:go_default_library",
        "@com_github_jessevdk_go_flags//:go_default_library",
        "@com_github_pkg_errors//:go_default_library",
        "@com_github_prometheus_client_golang//prometheus:go_default_library",
        "@com_github_prometheus_client_golang//prometheus/promhttp:go_default_library",
        "@com_github_rs_cors//:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/clients:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/graphql:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/graphql/utils:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/clusterapi:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/backups:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/batch:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/classifications:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/graphql:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/meta:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/nodes:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/objects:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/schema:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/well_known:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/state:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/swagger_middleware:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/repos/classifications:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/repos/db:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/repos/db/inverted:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/repos/modules:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/repos/schema:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/additional:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/backup:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/errors:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/models:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/moduletools:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/schema:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/schema/crossref:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/search:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/vectorindex/hnsw:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/backup-filesystem:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/backup-gcs:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/backup-s3:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/img2vec-neural:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/multi2vec-clip:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/ner-transformers:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/qna-openai:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/qna-transformers:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/ref2vec-centroid:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/sum-transformers:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/text-spellcheck:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/text2vec-cohere:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/text2vec-contextionary:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/text2vec-huggingface:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/text2vec-openai:go_default_library",
        "@com_github_semi_technologies_weaviate//modules/text2vec-transformers:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/auth/authentication/anonymous:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/auth/authentication/oidc:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/auth/authorization:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/auth/authorization/errors:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/backup:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/classification:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/cluster:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/config:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/modules:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/monitoring:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/nodes:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/objects:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/replica:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/scaling:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/schema:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/schema/migrate:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/sharding:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/traverser:go_default_library",
        "@com_github_sirupsen_logrus//:go_default_library",
        "@org_golang_x_net//netutil:go_default_library",
    ],
)

go_test(
    name = "rest_test",
    srcs = [
        "configure_weaviate_test.go",
        "handlers_objects_test.go",
    ],
    embed = [":rest"],
    deps = [
        "@com_github_go_openapi_strfmt//:go_default_library",
        "@com_github_semi_technologies_weaviate//adapters/handlers/rest/operations/objects:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/additional:go_default_library",
        "@com_github_semi_technologies_weaviate//entities/models:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/auth/authorization/errors:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/config:go_default_library",
        "@com_github_semi_technologies_weaviate//usecases/objects:go_default_library",
        "@com_github_sirupsen_logrus//:go_default_library",
        "@com_github_stretchr_testify//assert:go_default_library",
        "@com_github_stretchr_testify//require:go_default_library",
    ],
)
